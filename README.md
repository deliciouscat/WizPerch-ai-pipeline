# 기능 목록
✅ 구현됨 ❌ 구현필요
- 웹 추천
- 유저특성추출 / 칭호작명
- 요약 / 인덱싱
- 필터링

## 웹 추천
페이지 별 pool이 있고, 그 중에서 유저에게 적합한 페이지를 추천.  
- pool 구성은 관련성 기반. query expansion -> search
- 추천은 `1. knowledge tracing / 2. 선호도` 두가지 측면을 본다.  

### 구현 로드맵:
#### 1차 구현(Pool 구성)
- LLM으로 쿼리 확장(영어 먼저, 그 다음 각 언어별)
- DuckDuckGo 기반으로 단순히 검색하여 페이지 기록
- (검색 순서 기준 exponential 가중치) + (Gaussian noise) -> 랜덤하게 페이지 추천

#### 2차 구현(사용자 특성 반영)
칭호작명, 유저특성 저장 파이프라인 구축 후 가능  


#### 최종 구현(Knowledge Tracing 반영)


## 유저특성추출 / 칭호작명
칭호(ephithet) 작명은 방문 페이지가 아닌 작성한 댓글 기반으로 이루어져야.  
페이지 추천을 위한 특성은 방문 페이지와 댓글 반영.

### 추출해야 할 특성들
관심사와 그에 대한 관점, 정보 선택 특성,  
### Sparse하게 다루어야 할 요소들
관심사
- 대분류/소분류 체계
- 멀티턴 구성. 모델 자율 답변 -> `잠재적 분류군 후보`에 추가 -> `실제 현행 분류군` 중 어디에 해당되는지 -> `잠재적 분류군` 중 빈발하는 것 `실제 현행 분류군`에 추가 -> 현행 분류군 중 활성도 떨어지는 것 삭제 및 병합
- 활성도 삭제/병합 시 잠재적 문제점: 1. 지나버린 유행(볼륨은 큰데 활성도는 낮) 병합 시 신규 주제 비대화 2. N차 주제병합 시 동떨어진 곳에 분류 될 가능성
- 해결책?: 대분류만 병합하고 소분류는 `주제이름-d`(deprecated). 대분류 deprecate는 수동으로 할 수 있지 않을지?

정보 선택/해석 특성
- 근거 데이터: 링크 클릭, 댓글 입력
- 주제에 대한 태도: 문제해결/탐색/학습 등으로 분류? 그냥 string으로 서술?
- 인지부조화이론 공부 좀 해야 할 듯.

세계관 해석
- 특정 사안에 대한 구도?

```py
{
    "_id": str,
    "":,
}
```

### 태도, 정보, 행동

`f(태도, 정보) = 행동`  
태도 = 저장된 persona / 정보 = 페이지 / 행동 = 댓글
- `태도`는 상수로 생각.
- 어플리케이션은 `정보`를 제어할 수 있다.
- `행동`은 댓글 등으로 관측할 수 있다.
- 링크 클릭은 `태도`의 관측으로 볼 수 있다.

DB에 저장되어야 하는 정보는 `태도`이다.
`태도` 정보의 추상화 수준(요약 ~ 구체적)이 구체적일수록 정확한 `행동` 예측
- A = DB에 저장되어 있는 태도
- B = 방금 추출해낸 태도
라고 할때, `행동`과의 일치도는 `f(A+B, 정보)` > `f(A or B, 정보)` 여야겠다.  

`f(A+B, 정보)` < `f(A, 정보)`인 상황: 새로운 태도(B)의 추출이 잘못됨.  
`f(A+B, 정보)` < `f(B, 정보)`인 상황: 기존 태도 정보(A)에 잘못된 부분이 있음.  
기존 태도 정보(A)는 아무리 길어도 상관 없다는 조건을 충족해야 함(`저장 용량관리를 의한 축소`가 `컨텍스트 관리를 위한 축소`보다 먼저 일어나야 함.)

! 지금 최적화해야 하는건 `f`(프롬프트)가 아니라 태도 정보임 !  

B를 추출해내는 프로세스(프롬프트, 파이프라인) 개선을 위한 과정
```
1. 아래를 각각 실행:
f(A+B, ~)
f(A, ~)
f(B, ~)

2. 실제 댓글과 비교하여 얼마나 댓글을 잘 예측했는지를 확인.
f(A+B) < f(A) -> B를 추출하는 프롬프트를 개선
f(A+B) < f(A) -> 저장된 A에서 잘못된 부분이 있는지 확인. ('충돌되는 부분' 추출)
```

### 추상적(임베딩 기반)으로 다루어야 할 요소들  
#### page에 대해 유저가 comment를 어떻게 작성하는가? 에 대한 임베딩 모델 학습
나중에 군집분석 할 여지가 있을 듯.  
devBoard에 그려둔 Gated Fusion 구조로 ㄱ



## 요약


## 필터링


## 기타 재밌을만한 기능...
- 페이지마다 미니게임 넣으면 재밌지 않을까? (똑바로 이해했는지 퀴즈, 생각 물어보기, 투표 등.)
- 정보 인덱싱 목적이 아닌 display용 요약 (표, 그래프 등)
- 별로 표시할만한게 없는(네이버, 구글 메인페이지 등) 페이지에선 마스코트 캐릭터가 활동 요약해줌